{"version":3,"file":"useIsAuthenticated.js","sources":["../../src/hooks/useIsAuthenticated.ts"],"sourcesContent":["/**\n * @author Arkadip Bhattacharya <in2arkadipb13@gmail.com>\n * @fileoverview Authentication status <hook>\n * @copyright Arkadip Bhattacharya 2020\n *\n * Copyright 2020 Arkadip Bhattacharya\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *         http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as React from 'react';\nimport AuthContext from '../AuthContext';\nimport {doSignOut} from '../utils/reducers';\n\n/**\n  *@function\n  *@name useIsAuthenticated\n  *@description check weather user is authenticated or not\n  */\nfunction useIsAuthenticated(): ()=>boolean {\n  const context = React.useContext(AuthContext);\n  if (context === null) {\n    throw new\n    Error('Auth Provider is missing. ' +\n      'Please add the AuthProvider before Router');\n  }\n  return () => {\n    if (context.authState.auth) {\n      if (new Date(context.authState.auth.expiresAt) > new Date()) {\n        return true;\n      } else {\n        context.dispatch(doSignOut());\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n}\n/**\n  *@exports useIsAuthenticated\n  */\nexport default useIsAuthenticated;\n"],"names":[],"mappings":";;;;AAAA;;;;;;;;;;;;;;;;;;AAkBG;AAMH;;;;AAII;AACJ,SAAS,kBAAkB,GAAA;IACzB,IAAM,OAAO,GAAG,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;IAC9C,IAAI,OAAO,KAAK,IAAI,EAAE;QACpB,MAAM,IACN,KAAK,CAAC,4BAA4B;AAChC,YAAA,2CAA2C,CAAC,CAAC;AAChD,KAAA;IACD,OAAO,YAAA;AACL,QAAA,IAAI,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE;AAC1B,YAAA,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,EAAE,EAAE;AAC3D,gBAAA,OAAO,IAAI,CAAC;AACb,aAAA;AAAM,iBAAA;AACL,gBAAA,OAAO,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC;AAC9B,gBAAA,OAAO,KAAK,CAAC;AACd,aAAA;AACF,SAAA;AAAM,aAAA;AACL,YAAA,OAAO,KAAK,CAAC;AACd,SAAA;AACH,KAAC,CAAC;AACJ;;;;"}